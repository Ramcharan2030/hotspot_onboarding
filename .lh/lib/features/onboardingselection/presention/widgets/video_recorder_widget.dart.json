{
    "sourceFile": "lib/features/onboardingselection/presention/widgets/video_recorder_widget.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1762886862151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762892998117,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,11 +84,11 @@\n             // --- Top recording indicator ---\r\n             Container(\r\n               padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 10),\r\n               decoration: BoxDecoration(\r\n-                color: Colors.red.withOpacity(0.1),\r\n+                color: Colors.red.withAlpha(26),\r\n                 border: Border.all(\r\n-                  color: Colors.red.withOpacity(0.3),\r\n+                  color: Colors.red.withAlpha(77),\r\n                   width: 1,\r\n                 ),\r\n                 borderRadius: BorderRadius.circular(12),\r\n               ),\r\n@@ -108,9 +108,9 @@\n                         color: Colors.red,\r\n                         shape: BoxShape.circle,\r\n                         boxShadow: [\r\n                           BoxShadow(\r\n-                            color: Colors.red.withOpacity(0.8),\r\n+                            color: Colors.red.withAlpha(204),\r\n                             blurRadius: 8,\r\n                             spreadRadius: 2,\r\n                           ),\r\n                         ],\r\n@@ -135,14 +135,14 @@\n             Container(\r\n               decoration: BoxDecoration(\r\n                 borderRadius: BorderRadius.circular(12),\r\n                 border: Border.all(\r\n-                  color: Colors.red.withOpacity(0.4),\r\n+                  color: Colors.red.withAlpha(102),\r\n                   width: 2.5,\r\n                 ),\r\n                 boxShadow: [\r\n                   BoxShadow(\r\n-                    color: Colors.red.withOpacity(0.2),\r\n+                    color: Colors.red.withAlpha(51),\r\n                     blurRadius: 12,\r\n                     spreadRadius: 2,\r\n                   ),\r\n                 ],\r\n@@ -162,11 +162,11 @@\n                         child: Container(\r\n                           decoration: BoxDecoration(\r\n                             color: Colors.redAccent,\r\n                             shape: BoxShape.circle,\r\n-                            boxShadow: [\r\n+                              boxShadow: [\r\n                               BoxShadow(\r\n-                                color: Colors.red.withOpacity(0.8),\r\n+                                color: Colors.red.withAlpha(204),\r\n                                 blurRadius: 12,\r\n                                 spreadRadius: 2,\r\n                               ),\r\n                             ],\r\n@@ -199,10 +199,12 @@\n                 foregroundColor: Colors.white,\r\n                 shape: RoundedRectangleBorder(\r\n                   borderRadius: BorderRadius.circular(10),\r\n                 ),\r\n-                padding:\r\n-                    const EdgeInsets.symmetric(horizontal: 24, vertical: 12),\r\n+                padding: const EdgeInsets.symmetric(\r\n+                  horizontal: 24,\r\n+                  vertical: 12,\r\n+                ),\r\n               ),\r\n               icon: const Icon(Icons.stop, size: 18),\r\n               label: const Text(\r\n                 \"Stop Recording\",\r\n"
                }
            ],
            "date": 1762886862151,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport 'package:camera/camera.dart';\r\nimport 'package:hottspot_onboarding/features/onboardingselection/data/video_record_service.dart';\r\n\r\nclass VideoRecorderWidget extends StatefulWidget {\r\n  final VideoRecorderService videoService;\r\n  final bool isRecording;\r\n  final VoidCallback onStop;\r\n  final double width;\r\n\r\n  const VideoRecorderWidget({\r\n    super.key,\r\n    required this.videoService,\r\n    required this.isRecording,\r\n    required this.onStop,\r\n    required this.width,\r\n  });\r\n\r\n  @override\r\n  State<VideoRecorderWidget> createState() => _VideoRecorderWidgetState();\r\n}\r\n\r\nclass _VideoRecorderWidgetState extends State<VideoRecorderWidget>\r\n    with SingleTickerProviderStateMixin {\r\n  late AnimationController _recordingIndicatorController;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    _recordingIndicatorController = AnimationController(\r\n      duration: const Duration(milliseconds: 1500),\r\n      vsync: this,\r\n    );\r\n\r\n    // Start or stop the blinking light animation\r\n    if (widget.isRecording) {\r\n      _recordingIndicatorController.repeat(reverse: true);\r\n    }\r\n  }\r\n\r\n  @override\r\n  void didUpdateWidget(VideoRecorderWidget oldWidget) {\r\n    super.didUpdateWidget(oldWidget);\r\n    if (widget.isRecording && !_recordingIndicatorController.isAnimating) {\r\n      _recordingIndicatorController.repeat(reverse: true);\r\n    } else if (!widget.isRecording &&\r\n        _recordingIndicatorController.isAnimating) {\r\n      _recordingIndicatorController.stop();\r\n    }\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    _recordingIndicatorController.dispose();\r\n    super.dispose();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final controller = widget.videoService.controller;\r\n\r\n    // Safety checks â€” avoid crashes if controller is null or not initialized\r\n    if (controller == null || !controller.value.isInitialized) {\r\n      return const Center(\r\n        child: CircularProgressIndicator(color: Colors.redAccent),\r\n      );\r\n    }\r\n\r\n    return AnimatedOpacity(\r\n      opacity: widget.isRecording ? 1.0 : 0.0,\r\n      duration: const Duration(milliseconds: 400),\r\n      child: TweenAnimationBuilder<double>(\r\n        tween: Tween(begin: 0.0, end: 1.0),\r\n        duration: const Duration(milliseconds: 500),\r\n        curve: Curves.easeInOut,\r\n        builder: (context, value, child) {\r\n          return Transform.translate(\r\n            offset: Offset(0, 20 * (1 - value)),\r\n            child: Opacity(opacity: value, child: child),\r\n          );\r\n        },\r\n        child: Column(\r\n          children: [\r\n            // --- Top recording indicator ---\r\n            Container(\r\n              padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 10),\r\n              decoration: BoxDecoration(\r\n                color: Colors.red.withOpacity(0.1),\r\n                border: Border.all(\r\n                  color: Colors.red.withOpacity(0.3),\r\n                  width: 1,\r\n                ),\r\n                borderRadius: BorderRadius.circular(12),\r\n              ),\r\n              child: Row(\r\n                children: [\r\n                  ScaleTransition(\r\n                    scale: Tween(begin: 0.9, end: 1.2).animate(\r\n                      CurvedAnimation(\r\n                        parent: _recordingIndicatorController,\r\n                        curve: Curves.easeInOut,\r\n                      ),\r\n                    ),\r\n                    child: Container(\r\n                      width: 12,\r\n                      height: 12,\r\n                      decoration: BoxDecoration(\r\n                        color: Colors.red,\r\n                        shape: BoxShape.circle,\r\n                        boxShadow: [\r\n                          BoxShadow(\r\n                            color: Colors.red.withOpacity(0.8),\r\n                            blurRadius: 8,\r\n                            spreadRadius: 2,\r\n                          ),\r\n                        ],\r\n                      ),\r\n                    ),\r\n                  ),\r\n                  const SizedBox(width: 8),\r\n                  const Text(\r\n                    \"Recording Video...\",\r\n                    style: TextStyle(\r\n                      color: Colors.redAccent,\r\n                      fontWeight: FontWeight.w600,\r\n                      fontSize: 13,\r\n                    ),\r\n                  ),\r\n                ],\r\n              ),\r\n            ),\r\n            const SizedBox(height: 12),\r\n\r\n            // --- Camera Preview ---\r\n            Container(\r\n              decoration: BoxDecoration(\r\n                borderRadius: BorderRadius.circular(12),\r\n                border: Border.all(\r\n                  color: Colors.red.withOpacity(0.4),\r\n                  width: 2.5,\r\n                ),\r\n                boxShadow: [\r\n                  BoxShadow(\r\n                    color: Colors.red.withOpacity(0.2),\r\n                    blurRadius: 12,\r\n                    spreadRadius: 2,\r\n                  ),\r\n                ],\r\n              ),\r\n              child: ClipRRect(\r\n                borderRadius: BorderRadius.circular(10),\r\n                child: SizedBox(\r\n                  width: widget.width * 0.9,\r\n                  height: widget.width * 0.7,\r\n                  child: Stack(\r\n                    fit: StackFit.expand,\r\n                    children: [\r\n                      CameraPreview(controller),\r\n                      Positioned(\r\n                        top: 16,\r\n                        right: 16,\r\n                        child: Container(\r\n                          decoration: BoxDecoration(\r\n                            color: Colors.redAccent,\r\n                            shape: BoxShape.circle,\r\n                            boxShadow: [\r\n                              BoxShadow(\r\n                                color: Colors.red.withOpacity(0.8),\r\n                                blurRadius: 12,\r\n                                spreadRadius: 2,\r\n                              ),\r\n                            ],\r\n                          ),\r\n                          padding: const EdgeInsets.all(6),\r\n                          child: const SizedBox(\r\n                            width: 6,\r\n                            height: 6,\r\n                            child: DecoratedBox(\r\n                              decoration: BoxDecoration(\r\n                                color: Colors.white,\r\n                                shape: BoxShape.circle,\r\n                              ),\r\n                            ),\r\n                          ),\r\n                        ),\r\n                      ),\r\n                    ],\r\n                  ),\r\n                ),\r\n              ),\r\n            ),\r\n            const SizedBox(height: 12),\r\n\r\n            // --- Stop Button ---\r\n            ElevatedButton.icon(\r\n              onPressed: widget.onStop,\r\n              style: ElevatedButton.styleFrom(\r\n                backgroundColor: Colors.redAccent,\r\n                foregroundColor: Colors.white,\r\n                shape: RoundedRectangleBorder(\r\n                  borderRadius: BorderRadius.circular(10),\r\n                ),\r\n                padding:\r\n                    const EdgeInsets.symmetric(horizontal: 24, vertical: 12),\r\n              ),\r\n              icon: const Icon(Icons.stop, size: 18),\r\n              label: const Text(\r\n                \"Stop Recording\",\r\n                style: TextStyle(fontWeight: FontWeight.w600, fontSize: 13),\r\n              ),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n"
        }
    ]
}