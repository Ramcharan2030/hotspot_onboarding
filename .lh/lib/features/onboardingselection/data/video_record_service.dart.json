{
    "sourceFile": "lib/features/onboardingselection/data/video_record_service.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1762859667494,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762880794296,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,35 @@\n+import 'package:camera/camera.dart';\r\n+\r\n+class VideoRecorderService {\r\n+  CameraController? _controller;\r\n+\r\n+  Future<void> initCamera(CameraDescription cameraDescription) async {\r\n+    _controller = CameraController(cameraDescription, ResolutionPreset.medium);\r\n+    await _controller!.initialize();\r\n+  }\r\n+\r\n+  CameraController? get controller => _controller;\r\n+\r\n+  /// Start video recording. The `CameraController` will manage the file path\r\n+  /// and return it when stopped.\r\n+  Future<void> startRecording() async {\r\n+    if (_controller == null) throw StateError('Camera not initialized');\r\n+    // startVideoRecording doesn't take a path in newer camera versions;\r\n+    // stopVideoRecording returns an XFile with the path.\r\n+    await _controller!.startVideoRecording();\r\n+  }\r\n+\r\n+  /// Stop video recording and return the recorded file path (or null).\r\n+  Future<String?> stopRecording() async {\r\n+    if (_controller != null && _controller!.value.isRecordingVideo) {\r\n+      final XFile file = await _controller!.stopVideoRecording();\r\n+      return file.path;\r\n+    }\r\n+    return null;\r\n+  }\r\n+\r\n+  Future<void> dispose() async {\r\n+    await _controller?.dispose();\r\n+    _controller = null;\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1762886655873,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,216 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:camera/camera.dart';\r\n+\r\n+class VideoRecorderWidget extends StatefulWidget {\r\n+  final VideoRecorderService videoService;\r\n+  final bool isRecording;\r\n+  final VoidCallback onStop;\r\n+  final double width;\r\n+\r\n+  const VideoRecorderWidget({\r\n+    super.key,\r\n+    required this.videoService,\r\n+    required this.isRecording,\r\n+    required this.onStop,\r\n+    required this.width,\r\n+  });\r\n+\r\n+  @override\r\n+  State<VideoRecorderWidget> createState() => _VideoRecorderWidgetState();\r\n+}\r\n+\r\n+class _VideoRecorderWidgetState extends State<VideoRecorderWidget>\r\n+    with SingleTickerProviderStateMixin {\r\n+  late AnimationController _recordingIndicatorController;\r\n+\r\n+  @override\r\n+  void initState() {\r\n+    super.initState();\r\n+    _recordingIndicatorController = AnimationController(\r\n+      duration: const Duration(milliseconds: 1500),\r\n+      vsync: this,\r\n+    );\r\n+\r\n+    // Start or stop the blinking light animation\r\n+    if (widget.isRecording) {\r\n+      _recordingIndicatorController.repeat(reverse: true);\r\n+    }\r\n+  }\r\n+\r\n+  @override\r\n+  void didUpdateWidget(VideoRecorderWidget oldWidget) {\r\n+    super.didUpdateWidget(oldWidget);\r\n+    if (widget.isRecording && !_recordingIndicatorController.isAnimating) {\r\n+      _recordingIndicatorController.repeat(reverse: true);\r\n+    } else if (!widget.isRecording &&\r\n+        _recordingIndicatorController.isAnimating) {\r\n+      _recordingIndicatorController.stop();\r\n+    }\r\n+  }\r\n+\r\n+  @override\r\n+  void dispose() {\r\n+    _recordingIndicatorController.dispose();\r\n+    super.dispose();\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    final controller = widget.videoService.controller;\r\n+\r\n+    // Safety checks — avoid crashes if controller is null or not initialized\r\n+    if (controller == null || !controller.value.isInitialized) {\r\n+      return const Center(\r\n+        child: CircularProgressIndicator(color: Colors.redAccent),\r\n+      );\r\n+    }\r\n+\r\n+    return AnimatedOpacity(\r\n+      opacity: widget.isRecording ? 1.0 : 0.0,\r\n+      duration: const Duration(milliseconds: 400),\r\n+      child: TweenAnimationBuilder<double>(\r\n+        tween: Tween(begin: 0.0, end: 1.0),\r\n+        duration: const Duration(milliseconds: 500),\r\n+        curve: Curves.easeInOut,\r\n+        builder: (context, value, child) {\r\n+          return Transform.translate(\r\n+            offset: Offset(0, 20 * (1 - value)),\r\n+            child: Opacity(opacity: value, child: child),\r\n+          );\r\n+        },\r\n+        child: Column(\r\n+          children: [\r\n+            // --- Top recording indicator ---\r\n+            Container(\r\n+              padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 10),\r\n+              decoration: BoxDecoration(\r\n+                color: Colors.red.withOpacity(0.1),\r\n+                border: Border.all(\r\n+                  color: Colors.red.withOpacity(0.3),\r\n+                  width: 1,\r\n+                ),\r\n+                borderRadius: BorderRadius.circular(12),\r\n+              ),\r\n+              child: Row(\r\n+                children: [\r\n+                  ScaleTransition(\r\n+                    scale: Tween(begin: 0.9, end: 1.2).animate(\r\n+                      CurvedAnimation(\r\n+                        parent: _recordingIndicatorController,\r\n+                        curve: Curves.easeInOut,\r\n+                      ),\r\n+                    ),\r\n+                    child: Container(\r\n+                      width: 12,\r\n+                      height: 12,\r\n+                      decoration: BoxDecoration(\r\n+                        color: Colors.red,\r\n+                        shape: BoxShape.circle,\r\n+                        boxShadow: [\r\n+                          BoxShadow(\r\n+                            color: Colors.red.withOpacity(0.8),\r\n+                            blurRadius: 8,\r\n+                            spreadRadius: 2,\r\n+                          ),\r\n+                        ],\r\n+                      ),\r\n+                    ),\r\n+                  ),\r\n+                  const SizedBox(width: 8),\r\n+                  const Text(\r\n+                    \"Recording Video...\",\r\n+                    style: TextStyle(\r\n+                      color: Colors.redAccent,\r\n+                      fontWeight: FontWeight.w600,\r\n+                      fontSize: 13,\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            const SizedBox(height: 12),\r\n+\r\n+            // --- Camera Preview ---\r\n+            Container(\r\n+              decoration: BoxDecoration(\r\n+                borderRadius: BorderRadius.circular(12),\r\n+                border: Border.all(\r\n+                  color: Colors.red.withOpacity(0.4),\r\n+                  width: 2.5,\r\n+                ),\r\n+                boxShadow: [\r\n+                  BoxShadow(\r\n+                    color: Colors.red.withOpacity(0.2),\r\n+                    blurRadius: 12,\r\n+                    spreadRadius: 2,\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+              child: ClipRRect(\r\n+                borderRadius: BorderRadius.circular(10),\r\n+                child: SizedBox(\r\n+                  width: widget.width * 0.9,\r\n+                  height: widget.width * 0.7,\r\n+                  child: Stack(\r\n+                    fit: StackFit.expand,\r\n+                    children: [\r\n+                      CameraPreview(controller),\r\n+                      Positioned(\r\n+                        top: 16,\r\n+                        right: 16,\r\n+                        child: Container(\r\n+                          decoration: BoxDecoration(\r\n+                            color: Colors.redAccent,\r\n+                            shape: BoxShape.circle,\r\n+                            boxShadow: [\r\n+                              BoxShadow(\r\n+                                color: Colors.red.withOpacity(0.8),\r\n+                                blurRadius: 12,\r\n+                                spreadRadius: 2,\r\n+                              ),\r\n+                            ],\r\n+                          ),\r\n+                          padding: const EdgeInsets.all(6),\r\n+                          child: const SizedBox(\r\n+                            width: 6,\r\n+                            height: 6,\r\n+                            child: DecoratedBox(\r\n+                              decoration: BoxDecoration(\r\n+                                color: Colors.white,\r\n+                                shape: BoxShape.circle,\r\n+                              ),\r\n+                            ),\r\n+                          ),\r\n+                        ),\r\n+                      ),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+              ),\r\n+            ),\r\n+            const SizedBox(height: 12),\r\n+\r\n+            // --- Stop Button ---\r\n+            ElevatedButton.icon(\r\n+              onPressed: widget.onStop,\r\n+              style: ElevatedButton.styleFrom(\r\n+                backgroundColor: Colors.redAccent,\r\n+                foregroundColor: Colors.white,\r\n+                shape: RoundedRectangleBorder(\r\n+                  borderRadius: BorderRadius.circular(10),\r\n+                ),\r\n+                padding:\r\n+                    const EdgeInsets.symmetric(horizontal: 24, vertical: 12),\r\n+              ),\r\n+              icon: const Icon(Icons.stop, size: 18),\r\n+              label: const Text(\r\n+                \"Stop Recording\",\r\n+                style: TextStyle(fontWeight: FontWeight.w600, fontSize: 13),\r\n+              ),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1762886706103,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,222 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:camera/camera.dart';\r\n+\r\n+// Dummy implementation of VideoRecorderService for compilation.\r\n+// Replace this with your actual implementation or import.\r\n+class VideoRecorderService {\r\n+  CameraController? controller;\r\n+}\r\n+\r\n+class VideoRecorderWidget extends StatefulWidget {\r\n+  final VideoRecorderService videoService;\r\n+  final bool isRecording;\r\n+  final VoidCallback onStop;\r\n+  final double width;\r\n+\r\n+  const VideoRecorderWidget({\r\n+    super.key,\r\n+    required this.videoService,\r\n+    required this.isRecording,\r\n+    required this.onStop,\r\n+    required this.width,\r\n+  });\r\n+\r\n+  @override\r\n+  State<VideoRecorderWidget> createState() => _VideoRecorderWidgetState();\r\n+}\r\n+\r\n+class _VideoRecorderWidgetState extends State<VideoRecorderWidget>\r\n+    with SingleTickerProviderStateMixin {\r\n+  late AnimationController _recordingIndicatorController;\r\n+\r\n+  @override\r\n+  void initState() {\r\n+    super.initState();\r\n+    _recordingIndicatorController = AnimationController(\r\n+      duration: const Duration(milliseconds: 1500),\r\n+      vsync: this,\r\n+    );\r\n+\r\n+    // Start or stop the blinking light animation\r\n+    if (widget.isRecording) {\r\n+      _recordingIndicatorController.repeat(reverse: true);\r\n+    }\r\n+  }\r\n+\r\n+  @override\r\n+  void didUpdateWidget(VideoRecorderWidget oldWidget) {\r\n+    super.didUpdateWidget(oldWidget);\r\n+    if (widget.isRecording && !_recordingIndicatorController.isAnimating) {\r\n+      _recordingIndicatorController.repeat(reverse: true);\r\n+    } else if (!widget.isRecording &&\r\n+        _recordingIndicatorController.isAnimating) {\r\n+      _recordingIndicatorController.stop();\r\n+    }\r\n+  }\r\n+\r\n+  @override\r\n+  void dispose() {\r\n+    _recordingIndicatorController.dispose();\r\n+    super.dispose();\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    final controller = widget.videoService.controller;\r\n+\r\n+    // Safety checks — avoid crashes if controller is null or not initialized\r\n+    if (controller == null || !controller.value.isInitialized) {\r\n+      return const Center(\r\n+        child: CircularProgressIndicator(color: Colors.redAccent),\r\n+      );\r\n+    }\r\n+\r\n+    return AnimatedOpacity(\r\n+      opacity: widget.isRecording ? 1.0 : 0.0,\r\n+      duration: const Duration(milliseconds: 400),\r\n+      child: TweenAnimationBuilder<double>(\r\n+        tween: Tween(begin: 0.0, end: 1.0),\r\n+        duration: const Duration(milliseconds: 500),\r\n+        curve: Curves.easeInOut,\r\n+        builder: (context, value, child) {\r\n+          return Transform.translate(\r\n+            offset: Offset(0, 20 * (1 - value)),\r\n+            child: Opacity(opacity: value, child: child),\r\n+          );\r\n+        },\r\n+        child: Column(\r\n+          children: [\r\n+            // --- Top recording indicator ---\r\n+            Container(\r\n+              padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 10),\r\n+              decoration: BoxDecoration(\r\n+                color: Colors.red.withOpacity(0.1),\r\n+                border: Border.all(\r\n+                  color: Colors.red.withOpacity(0.3),\r\n+                  width: 1,\r\n+                ),\r\n+                borderRadius: BorderRadius.circular(12),\r\n+              ),\r\n+              child: Row(\r\n+                children: [\r\n+                  ScaleTransition(\r\n+                    scale: Tween(begin: 0.9, end: 1.2).animate(\r\n+                      CurvedAnimation(\r\n+                        parent: _recordingIndicatorController,\r\n+                        curve: Curves.easeInOut,\r\n+                      ),\r\n+                    ),\r\n+                    child: Container(\r\n+                      width: 12,\r\n+                      height: 12,\r\n+                      decoration: BoxDecoration(\r\n+                        color: Colors.red,\r\n+                        shape: BoxShape.circle,\r\n+                        boxShadow: [\r\n+                          BoxShadow(\r\n+                            color: Colors.red.withOpacity(0.8),\r\n+                            blurRadius: 8,\r\n+                            spreadRadius: 2,\r\n+                          ),\r\n+                        ],\r\n+                      ),\r\n+                    ),\r\n+                  ),\r\n+                  const SizedBox(width: 8),\r\n+                  const Text(\r\n+                    \"Recording Video...\",\r\n+                    style: TextStyle(\r\n+                      color: Colors.redAccent,\r\n+                      fontWeight: FontWeight.w600,\r\n+                      fontSize: 13,\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            const SizedBox(height: 12),\r\n+\r\n+            // --- Camera Preview ---\r\n+            Container(\r\n+              decoration: BoxDecoration(\r\n+                borderRadius: BorderRadius.circular(12),\r\n+                border: Border.all(\r\n+                  color: Colors.red.withOpacity(0.4),\r\n+                  width: 2.5,\r\n+                ),\r\n+                boxShadow: [\r\n+                  BoxShadow(\r\n+                    color: Colors.red.withOpacity(0.2),\r\n+                    blurRadius: 12,\r\n+                    spreadRadius: 2,\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+              child: ClipRRect(\r\n+                borderRadius: BorderRadius.circular(10),\r\n+                child: SizedBox(\r\n+                  width: widget.width * 0.9,\r\n+                  height: widget.width * 0.7,\r\n+                  child: Stack(\r\n+                    fit: StackFit.expand,\r\n+                    children: [\r\n+                      CameraPreview(controller),\r\n+                      Positioned(\r\n+                        top: 16,\r\n+                        right: 16,\r\n+                        child: Container(\r\n+                          decoration: BoxDecoration(\r\n+                            color: Colors.redAccent,\r\n+                            shape: BoxShape.circle,\r\n+                            boxShadow: [\r\n+                              BoxShadow(\r\n+                                color: Colors.red.withOpacity(0.8),\r\n+                                blurRadius: 12,\r\n+                                spreadRadius: 2,\r\n+                              ),\r\n+                            ],\r\n+                          ),\r\n+                          padding: const EdgeInsets.all(6),\r\n+                          child: const SizedBox(\r\n+                            width: 6,\r\n+                            height: 6,\r\n+                            child: DecoratedBox(\r\n+                              decoration: BoxDecoration(\r\n+                                color: Colors.white,\r\n+                                shape: BoxShape.circle,\r\n+                              ),\r\n+                            ),\r\n+                          ),\r\n+                        ),\r\n+                      ),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+              ),\r\n+            ),\r\n+            const SizedBox(height: 12),\r\n+\r\n+            // --- Stop Button ---\r\n+            ElevatedButton.icon(\r\n+              onPressed: widget.onStop,\r\n+              style: ElevatedButton.styleFrom(\r\n+                backgroundColor: Colors.redAccent,\r\n+                foregroundColor: Colors.white,\r\n+                shape: RoundedRectangleBorder(\r\n+                  borderRadius: BorderRadius.circular(10),\r\n+                ),\r\n+                padding:\r\n+                    const EdgeInsets.symmetric(horizontal: 24, vertical: 12),\r\n+              ),\r\n+              icon: const Icon(Icons.stop, size: 18),\r\n+              label: const Text(\r\n+                \"Stop Recording\",\r\n+                style: TextStyle(fontWeight: FontWeight.w600, fontSize: 13),\r\n+              ),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1762886732468,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,35 @@\n+import 'package:camera/camera.dart';\r\n+\r\n+class VideoRecorderService {\r\n+  CameraController? _controller;\r\n+\r\n+  Future<void> initCamera(CameraDescription cameraDescription) async {\r\n+    _controller = CameraController(cameraDescription, ResolutionPreset.medium);\r\n+    await _controller!.initialize();\r\n+  }\r\n+\r\n+  CameraController? get controller => _controller;\r\n+\r\n+  /// Start video recording. The `CameraController` will manage the file path\r\n+  /// and return it when stopped.\r\n+  Future<void> startRecording() async {\r\n+    if (_controller == null) throw StateError('Camera not initialized');\r\n+    // startVideoRecording doesn't take a path in newer camera versions;\r\n+    // stopVideoRecording returns an XFile with the path.\r\n+    await _controller!.startVideoRecording();\r\n+  }\r\n+\r\n+  /// Stop video recording and return the recorded file path (or null).\r\n+  Future<String?> stopRecording() async {\r\n+    if (_controller != null && _controller!.value.isRecordingVideo) {\r\n+      final XFile file = await _controller!.stopVideoRecording();\r\n+      return file.path;\r\n+    }\r\n+    return null;\r\n+  }\r\n+\r\n+  Future<void> dispose() async {\r\n+    await _controller?.dispose();\r\n+    _controller = null;\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1762886738194,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,35 @@\n+import 'package:camera/camera.dart';\r\n+\r\n+class VideoRecorderService {\r\n+  CameraController? _controller;\r\n+\r\n+  Future<void> initCamera(CameraDescription cameraDescription) async {\r\n+    _controller = CameraController(cameraDescription, ResolutionPreset.medium);\r\n+    await _controller!.initialize();\r\n+  }\r\n+\r\n+  CameraController? get controller => _controller;\r\n+\r\n+  /// Start video recording. The `CameraController` will manage the file path\r\n+  /// and return it when stopped.\r\n+  Future<void> startRecording() async {\r\n+    if (_controller == null) throw StateError('Camera not initialized');\r\n+    // startVideoRecording doesn't take a path in newer camera versions;\r\n+    // stopVideoRecording returns an XFile with the path.\r\n+    await _controller!.startVideoRecording();\r\n+  }\r\n+\r\n+  /// Stop video recording and return the recorded file path (or null).\r\n+  Future<String?> stopRecording() async {\r\n+    if (_controller != null && _controller!.value.isRecordingVideo) {\r\n+      final XFile file = await _controller!.stopVideoRecording();\r\n+      return file.path;\r\n+    }\r\n+    return null;\r\n+  }\r\n+\r\n+  Future<void> dispose() async {\r\n+    await _controller?.dispose();\r\n+    _controller = null;\r\n+  }\r\n+}\r\n"
                }
            ],
            "date": 1762859667494,
            "name": "Commit-0",
            "content": "import 'dart:io';\r\nimport 'package:camera/camera.dart';\r\nimport 'package:path_provider/path_provider.dart';\r\nimport 'package:path/path.dart' as path;\r\n\r\nclass VideoRecorderService {\r\n  CameraController? _controller;\r\n\r\n  Future<void> initCamera(CameraDescription cameraDescription) async {\r\n    _controller = CameraController(cameraDescription, ResolutionPreset.medium);\r\n    await _controller!.initialize();\r\n  }\r\n\r\n  CameraController? get controller => _controller;\r\n\r\n  Future<String> startRecording() async {\r\n    final dir = await getApplicationDocumentsDirectory();\r\n    final filePath = path.join(dir.path, 'video_${DateTime.now().millisecondsSinceEpoch}.mp4');\r\n    await _controller?.startVideoRecording();\r\n    return filePath;\r\n  }\r\n\r\n  Future<XFile?> stopRecording() async {\r\n    if (_controller != null && _controller!.value.isRecordingVideo) {\r\n      return await _controller!.stopVideoRecording();\r\n    }\r\n    return null;\r\n  }\r\n\r\n  Future<void> dispose() async {\r\n    await _controller?.dispose();\r\n  }\r\n}\r\n"
        }
    ]
}