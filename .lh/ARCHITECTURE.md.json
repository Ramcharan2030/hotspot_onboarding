{
    "sourceFile": "ARCHITECTURE.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1762892091355,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1762892091355,
            "name": "Commit-0",
            "content": "# Hotspot Onboarding - Architecture & Scalability Guide\r\n\r\n## Project Structure Overview\r\n\r\n```\r\nlib/\r\n├── main.dart                          # App entry point with MaterialApp setup\r\n├── core/                              # Shared utilities, widgets, theme\r\n│   ├── router/                        # Navigation routing (future: Go Router)\r\n│   ├── theme/                         # App theme, colors, typography\r\n│   └── widgets/                       # Reusable widgets (ZigzagBackground, etc.)\r\n├── features/                          # Feature-based modular structure\r\n│   ├── expericeneselction/            # Experience Selection Feature\r\n│   │   ├── data/                      # Data layer (models, services)\r\n│   │   │   ├── experince_model.dart\r\n│   │   │   └── experince_service.dart\r\n│   │   ├── presentaion/               # Presentation layer (UI)\r\n│   │   │   ├── experince_screen.dart  # Main screen with animations\r\n│   │   │   └── widgets/               # Feature-specific widgets\r\n│   │   │       └── animate_wave.dart  # Wave progress header\r\n│   │   └── provider/                  # State management (Riverpod)\r\n│   │       └── experince_provider.dart\r\n│   └── onboardingselection/           # Onboarding/Question Feature\r\n│       ├── data/                      # Data layer\r\n│       │   ├── audio_record_service.dart\r\n│       │   └── video_record_service.dart\r\n│       ├── presention/                # Presentation layer (UI)\r\n│       │   ├── onboarding_screnn.dart # Main onboarding screen\r\n│       │   └── widgets/               # Feature-specific widgets\r\n│       │       ├── record_audio.dart\r\n│       │       └── video_recorder_widget.dart\r\n│       └── provider/                  # State management (Riverpod)\r\n│           └── on_boarding_provider.dart\r\n└── data/                              # App-wide data (if needed)\r\n```\r\n\r\n## Architectural Principles\r\n\r\n### 1. **Clean Architecture - Layered Approach**\r\n\r\nEach feature follows a **Clean Architecture** pattern with three layers:\r\n\r\n#### **Presentation Layer** (`presentation/`)\r\n- **Responsibility**: UI rendering, user interactions, animations\r\n- **Contains**: Screens, UI widgets, animations\r\n- **Example**: `experince_screen.dart`, `onboarding_screnn.dart`\r\n- **Depends on**: Provider (for state), Models (for data display)\r\n\r\n#### **Business Logic Layer** (`provider/`)\r\n- **Responsibility**: State management, business rules\r\n- **Tool**: Riverpod (StateNotifierProvider for mutations)\r\n- **Example**: `on_boarding_provider.dart`, `experince_provider.dart`\r\n- **Depends on**: Data layer (services, models)\r\n\r\n#### **Data Layer** (`data/`)\r\n- **Responsibility**: Data fetching, API calls, local storage, device services\r\n- **Contains**: Services, models, repositories (future)\r\n- **Example**: `audio_record_service.dart`, `video_record_service.dart`\r\n- **Independent**: No dependencies on presentation or business logic\r\n\r\n---\r\n\r\n## Key Features & Best Practices\r\n\r\n### 2. **Feature-Based Modular Structure**\r\n\r\nEach feature is **self-contained** and can be developed/tested independently:\r\n\r\n```\r\n✓ Easy to add new features without affecting existing code\r\n✓ Easy to test features in isolation\r\n✓ Clear separation of concerns\r\n✓ Simple to reuse features across the app\r\n```\r\n\r\n**Example**: Adding a new \"Profile\" feature:\r\n```\r\nfeatures/profile/\r\n├── data/\r\n│   ├── profile_model.dart\r\n│   └── profile_service.dart\r\n├── presentation/\r\n│   ├── profile_screen.dart\r\n│   └── widgets/\r\n└── provider/\r\n    └── profile_provider.dart\r\n```\r\n\r\n### 3. **State Management - Riverpod Pattern**\r\n\r\n```dart\r\n// ✓ Good: State is defined clearly\r\nfinal onboardingProvider = StateNotifierProvider.autoDispose<\r\n  OnboardingNotifier,\r\n  OnboardingState\r\n>((ref) => OnboardingNotifier());\r\n\r\n// ✓ Easy to test: Notifier is a plain class\r\nclass OnboardingNotifier extends StateNotifier<OnboardingState> {\r\n  void stopAudioRecording(String path) {\r\n    state = state.copyWith(audioPath: path);\r\n  }\r\n}\r\n\r\n// ✓ Usage in UI is simple\r\nfinal state = ref.watch(onboardingProvider);\r\nref.read(onboardingProvider.notifier).stopAudioRecording(path);\r\n```\r\n\r\n---\r\n\r\n## File Naming Conventions\r\n\r\n### Screen Files\r\n```\r\n✓ {feature}_screen.dart       (e.g., experince_screen.dart)\r\n✗ {feature}_page.dart         (Prefer 'screen' for clarity)\r\n✗ {feature}_view.dart         (Prefer 'screen' for clarity)\r\n```\r\n\r\n### Widget Files\r\n```\r\n✓ {widget_name}_widget.dart   (e.g., video_recorder_widget.dart)\r\n✓ {component}_button.dart     (e.g., record_audio_button.dart)\r\n✓ animate_{feature}.dart      (e.g., animate_wave.dart)\r\n```\r\n\r\n### Service Files\r\n```\r\n✓ {service}_service.dart      (e.g., audio_record_service.dart)\r\n✓ {feature}_repository.dart   (Future: data abstraction layer)\r\n```\r\n\r\n### Provider Files\r\n```\r\n✓ {feature}_provider.dart     (e.g., on_boarding_provider.dart)\r\n```\r\n\r\n### Model Files\r\n```\r\n✓ {model}_model.dart          (e.g., experince_model.dart)\r\n✓ {model}.dart                (Alternate: simpler names)\r\n```\r\n\r\n---\r\n\r\n## Best Practices Implemented\r\n\r\n### ✅ Separation of Concerns\r\n- **Services** handle device interactions (recording, camera)\r\n- **Providers** manage app state\r\n- **Screens** focus purely on UI and user interactions\r\n\r\n### ✅ Reusable Components\r\n- `ZigzagBackground` - shared background widget\r\n- `CurvedWaveProgressHeader` - reusable wave animation\r\n- `RecordAudioButton`, `RecordVideoButton` - feature-specific but reusable\r\n\r\n### ✅ Type Safety\r\n- Models are properly typed (ExperienceModel, OnboardingState)\r\n- No `dynamic` types (prefer explicit typing)\r\n- Dart's type inference is used where appropriate\r\n\r\n### ✅ Error Handling\r\n- Services provide try-catch wrappers\r\n- Print diagnostics for debugging (can be replaced with logging later)\r\n- Graceful fallbacks for file operations\r\n\r\n### ✅ Code Documentation\r\n- Comments explain non-obvious logic\r\n- Class purposes documented with `///` doc comments\r\n- Parameter purposes and return types are clear\r\n\r\n---\r\n\r\n## Scalability Roadmap\r\n\r\n### Phase 1: Current ✅\r\n```\r\n✓ Feature-based structure\r\n✓ Clean layered architecture\r\n✓ Riverpod state management\r\n✓ Reusable widgets and services\r\n```\r\n\r\n### Phase 2: Future Enhancements\r\n\r\n#### **Add Repository Pattern** (Data Abstraction)\r\n```dart\r\n// Replace direct service calls with repositories\r\nabstract class IAudioRepository {\r\n  Future<String> recordAudio();\r\n  Future<void> playAudio(String path);\r\n  Future<void> deleteAudio(String path);\r\n}\r\n\r\nclass AudioRepository implements IAudioRepository {\r\n  final AudioRecordService _service;\r\n  // Implementation\r\n}\r\n```\r\n\r\n#### **Add Dependency Injection** (GetIt or Riverpod Providers)\r\n```dart\r\n// Centralize all service instantiation\r\nfinal audioServiceProvider = Provider((ref) => AudioRecordService());\r\n```\r\n\r\n#### **Add Navigation Router** (Go Router)\r\n```dart\r\n// Type-safe routing with parameters\r\nfinal goRouter = GoRouter(\r\n  routes: [\r\n    GoRoute(path: '/experience', builder: (_, __) => ExperienceScreen()),\r\n    GoRoute(path: '/onboarding', builder: (_, __) => OnboardingScreen()),\r\n  ],\r\n);\r\n```\r\n\r\n#### **Add Logging** (Replace print with proper logging)\r\n```dart\r\nimport 'logger/app_logger.dart';\r\n\r\nclass AudioRecordService {\r\n  void startRecording() {\r\n    logger.info('Recording started');\r\n  }\r\n}\r\n```\r\n\r\n#### **Add Unit & Widget Tests**\r\n```\r\ntest/\r\n├── unit/\r\n│   ├── services/\r\n│   │   └── audio_record_service_test.dart\r\n│   └── providers/\r\n│       └── on_boarding_provider_test.dart\r\n└── widget/\r\n    ├── screens/\r\n    │   └── onboarding_screen_test.dart\r\n    └── widgets/\r\n        └── animate_wave_test.dart\r\n```\r\n\r\n---\r\n\r\n## Current Code Quality Metrics\r\n\r\n| Aspect | Status | Notes |\r\n|--------|--------|-------|\r\n| **Architecture** | ✅ Excellent | Clean, layered, modular |\r\n| **Separation of Concerns** | ✅ Good | Clear boundaries between layers |\r\n| **Naming Conventions** | ⚠️ Minor | Typo: `experince_` (should be `experience_`) |\r\n| **Type Safety** | ✅ Strong | Proper models and typing |\r\n| **Reusability** | ✅ Good | Shared widgets and services |\r\n| **Documentation** | ⚠️ Fair | Add more doc comments |\r\n| **Testing** | ❌ None | No tests yet (Phase 2) |\r\n| **Error Handling** | ✅ Good | Try-catch with fallbacks |\r\n| **Performance** | ✅ Good | Efficient animations, proper disposal |\r\n\r\n---\r\n\r\n## Recommended Next Steps\r\n\r\n### Short Term (Immediate)\r\n1. ✅ **Fix naming typo**: `experince_` → `experience_` (for consistency)\r\n2. ✅ **Add more doc comments** to services and providers\r\n3. ✅ **Replace print() with logger** for production-ready logging\r\n\r\n### Medium Term (Sprint 2-3)\r\n1. Add Repository pattern for better data abstraction\r\n2. Implement Go Router for type-safe navigation\r\n3. Add comprehensive error handling with custom exceptions\r\n4. Create reusable service locator (GetIt or Riverpod)\r\n\r\n### Long Term (Sprint 4+)\r\n1. Add unit tests for services and providers\r\n2. Add widget tests for screens\r\n3. Add integration tests\r\n4. Implement analytics logging\r\n5. Add feature flags for A/B testing\r\n6. Implement offline-first caching strategy\r\n\r\n---\r\n\r\n## Code Quality Checklist\r\n\r\nWhen adding new features, ensure:\r\n\r\n- [ ] Feature is in its own directory under `features/`\r\n- [ ] Data layer is separated from presentation\r\n- [ ] Services handle all device interactions\r\n- [ ] Providers manage all state mutations\r\n- [ ] UI screens only display UI (no business logic)\r\n- [ ] All models are properly typed\r\n- [ ] Error handling is in place\r\n- [ ] Comments document non-obvious logic\r\n- [ ] Code follows Dart style guide (`dart format`)\r\n- [ ] No `print()` statements in production code (use logger)\r\n- [ ] Widgets are properly disposed (AnimationController, StreamSubscription)\r\n- [ ] No hardcoded strings (use constants)\r\n\r\n---\r\n\r\n## Resources & References\r\n\r\n- **Riverpod**: https://riverpod.dev/ - State management\r\n- **Clean Architecture**: https://www.freecodecamp.org/news/a-quick-introduction-to-clean-architecture-useful-for-django-django-rest-framework-and-flask/\r\n- **Flutter Best Practices**: https://flutter.dev/docs/testing/best-practices\r\n- **Dart Style Guide**: https://dart.dev/guides/language/effective-dart/style\r\n\r\n---\r\n\r\n## Contact & Questions\r\n\r\nFor architecture questions or to propose structural changes, please document the rationale and impact before implementing.\r\n\r\n"
        }
    ]
}